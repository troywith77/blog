<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>JavaScript DOM 编程艺术 第四章 | Troy&#39;s Blog</title>
  <meta name="viewport" content="width=device-width">
  <meta name="description" content="书中此章完整代码12345678function showPic(whichpic)&amp;#123;    var source = whichpic.getAttribute(&quot;href&quot;);    var placeholder = document.getElementById(&quot;placeholder&quot;);    placeholder.setAttribute(&quot;src&quot;, source);">
<meta property="og:type" content="article">
<meta property="og:title" content="JavaScript DOM 编程艺术 第四章">
<meta property="og:url" content="http://www.tangrui.win/blog/2015/03/10/JavaScript-DOM-编程艺术-第四章/index.html">
<meta property="og:site_name" content="Troy&#39;s Blog">
<meta property="og:description" content="书中此章完整代码12345678function showPic(whichpic)&amp;#123;    var source = whichpic.getAttribute(&quot;href&quot;);    var placeholder = document.getElementById(&quot;placeholder&quot;);    placeholder.setAttribute(&quot;src&quot;, source);">
<meta property="og:locale" content="ZH-CN">
<meta property="og:updated_time" content="2018-01-24T02:05:54.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="JavaScript DOM 编程艺术 第四章">
<meta name="twitter:description" content="书中此章完整代码12345678function showPic(whichpic)&amp;#123;    var source = whichpic.getAttribute(&quot;href&quot;);    var placeholder = document.getElementById(&quot;placeholder&quot;);    placeholder.setAttribute(&quot;src&quot;, source);">
  
    <link rel="alternative" href="/atom.xml" title="Troy&#39;s Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="//7xjr92.com1.z0.glb.clouddn.com/images/favicon.ico">
  
  <link rel="stylesheet" href="/blog/css/style.css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

</head>
<body>
  <div id="bg">
    <div id="bg-mask">
      <h1>Troy's Blog</h1>
      <p>思想，故事和灵感</p>
    </div>
  </div>
  <nav class="nav">
    <ul>
      <li><a href="/blog">Home</a></li><li><a href="/blog/archives">Archives</a></li><li><a href="http://www.github.com/troywith77">Github</a></li><li><a href="http://tangrui.win">About</a></li><li><a href="mailto:ruitang307@gmail.com">Mail me</a></li>
    </ul>
  </nav>
  <div id="container">
    <div class="mobile-nav-panel">
	<i class="icon-reorder icon-large"></i>
</div>
<header id="header">
	<h1 class="blog-title">
		<a href="/blog/">Troy&#39;s Blog</a>
	</h1>
	<p class="cite-myself">思想，故事和灵感</p>
</header>
    <div id="main">
      <div class="post-container">
  <!-- <div class="toc-container">
    <div class="toc-inner">
  <header class="toc-header">
    目录
  </header>
  <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#书中此章完整代码"><span class="toc-number">1.</span> <span class="toc-text">书中此章完整代码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#setAttribute-方法"><span class="toc-number">2.</span> <span class="toc-text">setAttribute 方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#获取属性"><span class="toc-number">3.</span> <span class="toc-text">获取属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#onclick-事件处理函数"><span class="toc-number">4.</span> <span class="toc-text">onclick 事件处理函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#childNodes-属性"><span class="toc-number">5.</span> <span class="toc-text">childNodes 属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#nodeType-属性"><span class="toc-number">6.</span> <span class="toc-text">nodeType 属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#nodeValue-属性"><span class="toc-number">7.</span> <span class="toc-text">nodeValue 属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#firstChild-和-lastChild-属性"><span class="toc-number">8.</span> <span class="toc-text">firstChild 和 lastChild 属性</span></a></li></ol>
</div>
  </div> -->
  <article id="post-JavaScript-DOM-编程艺术-第四章" class="post">
	<footer class="entry-meta-header">
		<span class="meta-elements date">
			<a href="/blog/2015/03/10/JavaScript-DOM-编程艺术-第四章/" class="article-date">
  <time datetime="2015-03-10T04:31:43.000Z" itemprop="datePublished">03-10-2015</time>
</a>
		</span>
		<div class="commentscount">
			
		</div>
	</footer>
	
	<header class="entry-header">
		
  
    <h1 class="article-title entry-title" itemprop="name">
      JavaScript DOM 编程艺术 第四章
    </h1>
  

	</header>
	<div class="entry-content">
		
    	<h3 id="书中此章完整代码"><a href="#书中此章完整代码" class="headerlink" title="书中此章完整代码"></a>书中此章完整代码</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">showPic</span>(<span class="params">whichpic</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> source = whichpic.getAttribute(<span class="string">"href"</span>);</span><br><span class="line">    <span class="keyword">var</span> placeholder = <span class="built_in">document</span>.getElementById(<span class="string">"placeholder"</span>);</span><br><span class="line">    placeholder.setAttribute(<span class="string">"src"</span>, source);</span><br><span class="line">    <span class="keyword">var</span> text = whichpic.getAttribute(<span class="string">"title"</span>);</span><br><span class="line">    <span class="keyword">var</span> description = <span class="built_in">document</span>.getElementById(<span class="string">"description"</span>);</span><br><span class="line">    description.firstChild.nodeValue = text;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="setAttribute-方法"><a href="#setAttribute-方法" class="headerlink" title="setAttribute 方法"></a>setAttribute 方法</h3><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">setAttribute(<span class="string">"string name"</span>, <span class="keyword">string</span> <span class="keyword">value</span>);</span><br></pre></td></tr></table></figure>
<ul>
<li>使用 setAttribute 方法来刷新元素的属性。</li>
</ul>
<h3 id="获取属性"><a href="#获取属性" class="headerlink" title="获取属性"></a>获取属性</h3><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">getElementById(<span class="string">"ID"</span>)<span class="comment">;</span></span><br><span class="line">getElementsByTagName(<span class="string">"Tag name"</span>)<span class="comment">;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>getElementsByTagName() 方法返回元素的顺序是它们在文档中的顺序。取得的是一个数组，需要索引。</li>
</ul>
<a id="more"></a>
<h3 id="onclick-事件处理函数"><a href="#onclick-事件处理函数" class="headerlink" title="onclick 事件处理函数"></a>onclick 事件处理函数</h3><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">onclick</span> = <span class="string">"showPic(this); return false;"</span></span><br></pre></td></tr></table></figure>
<ul>
<li>this 关键字在这的含义“这个对象”。</li>
<li>onclick 事件处理函数；事件处理函数的作用是，在特定事件发生时调用特定的JavaScript代码。</li>
<li>事件处理函数的工作机制：在给某个元素添加了事件处理函数后，一旦事件发生，相应的JavaScript代码就会执行。被调用的代码可以返回一个值，这个值将被传递给那个事件处理函数。这个示例中添加了一个 onclick 事件处理函数，并让这个处理函数所触发的代码返回布尔值 true 或 false 。这样的话，根据返回的值， onclick 处理函数就知道链接有没有被点击。而强制设置了 return false 之后，每次 onclick 处理函数都会认为链接并没有被打开，就不会有默认的在新标签打开链接的行为了。</li>
</ul>
<h3 id="childNodes-属性"><a href="#childNodes-属性" class="headerlink" title="childNodes 属性"></a>childNodes 属性</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">countBodyChildren</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> body_element = <span class="built_in">document</span>.getElementsByTagName(<span class="string">"body"</span>)[<span class="number">0</span>];</span><br><span class="line">    alert (body_element.childNodes.length);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">window</span>.onload = countBodyChildren;</span><br></pre></td></tr></table></figure>
<ul>
<li>childNodes 属性可以用来获取任何一个元素的所有子元素，它是一个包含这个元素全部子元素的数组。</li>
<li>因为文档只有一个 body 元素，所以索引取第一个元素。</li>
<li>使用 onload 事件处理函数，让这个函数在页面加载时执行。</li>
<li>由 childNodes 属性返回的数组包含所有类型的借点，而不仅仅是元素节点。</li>
</ul>
<h3 id="nodeType-属性"><a href="#nodeType-属性" class="headerlink" title="nodeType 属性"></a>nodeType 属性</h3><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">node</span>.<span class="title">nodeType</span></span><br><span class="line">alert (body_element.nodeType);</span><br></pre></td></tr></table></figure>
<ul>
<li>nodeType 的值是一个数字。</li>
<li>元素节点的 nodeType 属性值是 1。</li>
<li>属性节点的 nodeType 属性值是 2。</li>
<li>文本节点的 nodeType 属性值是 3。</li>
<li>可以根据 nodeType 的值对特定类型的节点进行处理（if）。</li>
</ul>
<h3 id="nodeValue-属性"><a href="#nodeValue-属性" class="headerlink" title="nodeValue 属性"></a>nodeValue 属性</h3><ul>
<li>如果想要改变一个节点的值，就要使用 nodeValue 属性，它用来得到和设置一个节点的值。</li>
<li>用 nodeValue 获取 description 对象的值并不是包含在这个段落里的文本。里面的文本是另一种节点，是 p 元素的第一个子节点。<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">alert</span> (<span class="selector-tag">description</span><span class="selector-class">.childNodes</span><span class="selector-attr">[0]</span><span class="selector-class">.nodeValue</span>);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="firstChild-和-lastChild-属性"><a href="#firstChild-和-lastChild-属性" class="headerlink" title="firstChild 和 lastChild 属性"></a>firstChild 和 lastChild 属性</h3><ul>
<li><p>数组元素 childNodes[0] 有一个更直观易读的同义词，只要是访问 childNodes 数组的第一个元素，都可以写成 firstChild：</p>
<figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">node</span>.<span class="title">firstChild</span></span><br><span class="line"><span class="keyword">node</span>.<span class="title">childNodes</span>[<span class="number">0</span>]</span><br></pre></td></tr></table></figure>
</li>
<li><p>与之相对的是 lastChild 属性。如果不使用 lastChild 属性访问最后一个元素，则要使用下面这个复杂的语法：</p>
<figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">node</span>.<span class="title">childNodes</span>[<span class="keyword">node</span>.<span class="title">childNodes</span>.length - <span class="number">1</span>];</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>###小结<br>初次使用 DOM 脚本编写了一个图片库脚本，了解了基本的获取属性、设置属性值、事件处理函数、找出正确节点的方法。</p>

    
	</div>
	<footer class="entry-footer">
		<div class="entry-meta-footer">
			<span class="category">
				
			</span>
			<span class="tags">
				
			</span>
		</div>
	</footer>
	
    
<nav id="article-nav">
  
    <a href="/blog/2015/03/16/JavaScript-DOM-编程艺术-第五章/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          JavaScript DOM 编程艺术 第五章
        
      </div>
    </a>
  
  
    <a href="/blog/2015/03/07/JavaScript-DOM-编程艺术-第三章/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">
        
          JavaScript DOM 编程艺术 第三章
        
      </div>
    </a>
  
</nav>

  
</article>
</div>
    </div>
    <footer id="footer">
	<div class="footer-blog-title">
		<p>&copy; 2018 Troy&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p>
		<p>Glad to meet you here!<br /></p>
		<p>If you like the theme, go get it! <a href="https://github.com/troywith77/zenT">Install !</a></p>
	</div>
</footer>
    

<script src="/blog/js/jquery.min.js"></script>


<link rel="stylesheet" href="/blog/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/blog/fancybox/jquery.fancybox.pack.js"></script>


<script src="/blog/js/script.js"></script>
  </div>
</body>
</html>